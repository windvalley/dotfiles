# Helix 快速上手指南 (Neovim 用户版)

如果你是一名 Neovim 重度用户，刚切换到 Helix，这份文档将帮助你快速度过"肌肉记忆"的磨合期。

## 1. 核心思维转变：Selection-First

| | Neovim (Verb → Object) | Helix (Object → Verb) |
| :--- | :--- | :--- |
| 删除单词 | `dw` (先说"删除"，再说"单词") | `wd` (先选中单词，再删除) |
| 删除行 | `dd` | `xd` (`x` 选中行，`d` 删除) |
| 复制行 | `yy` | `xy` |

**为什么？** 在 Helix 中，你先选择文本（高亮可见），再执行动作。按下删除键之前就能**看到**受影响的范围，无需猜测。

## 2. 三种核心模式

- **Normal** — 默认模式。移动光标即是在"选择"（即使只选中一个字符）。
- **Insert** — `i` / `a` / `I` / `A` 进入，与 Vim 一致。
- **Select** — `v` 进入。移动操作会**扩展**选区而非移动光标（等同 Vim Visual Mode）。

## 3. 按键映射对比

### 基础编辑

| 操作 | Neovim | Helix | 备注 |
| :--- | :--- | :--- | :--- |
| 行首 / 行尾 | `0` / `$` | `gh` / `gl` | `g` 菜单 (Go) |
| 文件末尾 | `G` | `ge` | |
| 查找字符 | `f` + 字符 | `f` + 字符 | 一致 |
| 重复查找 | `;` | `Ctrl + ;` | 自定义映射，详见下方说明 |
| 搜索 | `/text` | `/text` Enter | `n` / `N` 跳转依然有效 |
| 替换 | `:%s/old/new/g` | `%` → `s` → 输入正则 → `c` → 输入新内容 | 全文多光标替换 |
| 注释 | `gcc` / `gc` | `Ctrl + c` | 选中多行后批量注释 |
| 悬浮文档 | `K` | `Space + k` | `K` 在 Helix 中默认为 `keep_selections`（筛选多光标） |
| 代码动作 | `leader + ca` | `Space + a` | `Space` 是 Helix 的 leader 菜单 |
| 撤销 / 重做 | `u` / `Ctrl + r` | `u` / `U` | |

### 选择操作

Helix 的所有移动都会产生选区。掌握选区管理是高效使用的关键：

| 按键 | 功能 | Vim 类比 |
| :--- | :--- | :--- |
| `w` / `b` / `e` | 选中到下一个词首 / 上一个词首 / 词尾 | 移动 + 自动选中 |
| `x` | 选中当前行（连按扩展多行） | `V` |
| `%` | 选中整个文件 | `ggVG` |
| `v` | 进入选择模式（移动时扩展选区） | `v` |
| `mi` + 对象 | 选中内部文本对象，如 `miw`、`mi(` | `vi` + 对象 |
| `ma` + 对象 | 选中含分隔符的文本对象，如 `ma(` | `va` + 对象 |
| `;` | **折叠选区**为单个光标点 | — |
| `,` | **取消多光标**，只保留主选区 | — |
| `Ctrl + h/l` | 选择内容到行首/行尾（自定义映射） | `v` + `0/$` |

> [!IMPORTANT]
> **`;`（折叠选区）是 Helix 中使用频率最高的按键之一。** 因为几乎所有操作都会产生选区，你需要频繁按 `;` 把选区折叠回单个光标。本配置中 `Ctrl + ;` 用于重复 `f`/`t` 跳转（类似 Vim 的 `;`），而默认 `;` 保持不变。

### 多光标操作

不需要插件，Helix 原生支持多光标：

1. `x` 选中多行
2. `s` 输入正则（如 `foo`），在选区内匹配子选区
3. `K` 输入正则，**只保留匹配的选区**（过滤不需要的）
4. `c` 统一修改 — 这就是 Helix 的"查找替换"

| 按键 | 功能 |
| :--- | :--- |
| `s` | 在选区内按正则匹配子选区 |
| `S` | 按正则拆分选区 |
| `C` | 复制选区到下一行（创建多光标） |
| `K` | 按正则**保留**匹配的选区（过滤掉不需要的） |

> [!TIP]
> **系统剪贴板**：`y` / `p` 仅在编辑器内部工作。与 macOS 其他程序交互：
> - **复制到系统剪贴板**：`Space + y`
> - **从系统剪贴板粘贴**：`Space + p`
>
> 这样可以避免编辑过程中的临时复制冲掉剪贴板里的重要内容。

## 4. LSP 与代码导航

已在 `languages.toml` 中配置多种语言，以下快捷键开箱即用：

| 按键 | 功能 |
| :--- | :--- |
| `gd` | 跳转到定义 (Go to Definition) |
| `gr` | 查看引用 (Go to References) |
| `gy` | 跳转到类型定义 |
| `Space + r` | 重命名符号 |
| `Space + a` | 代码动作 |
| `Space + k` | 悬浮文档 |

## 5. 窗口与缓冲区

| 按键 | 功能 | Vim 类比 |
| :--- | :--- | :--- |
| `Ctrl + w, v` | 纵向分屏 | `:vsplit` |
| `Ctrl + w, s` | 横向分屏 | `:split` |
| `Ctrl + w, w` | 切换窗口 | `Ctrl + w, w` |
| `Ctrl + w, q` | 关闭窗口 | `:q` |
| `Space + b` | 缓冲区选择器（推荐，带模糊搜索） | `:ls` + `:b` |
| `Space + f` | 文件选择器 | Telescope |
| `gn` / `gp` | 下一个 / 上一个缓冲区 | `:bn` / `:bp` |
| `:bc` | 关闭当前缓冲区 | `:bd` |

> [!TIP]
> 开启 `bufferline = "multiple"`（已配置）后，打开多个文件时顶部会显示缓冲区标签栏，用 `gn`/`gp` 快速切换。

## 6. 渐进式发现

忘记快捷键？按下以下任意键后**稍等片刻**，Helix 会弹出所有可用选项：

`g`（跳转）· `m`（匹配）· `z`（视图）· `[` / `]`（导航）· `Space`（leader 菜单）

## 7. 实用命令

| 命令 | 功能 |
| :--- | :--- |
| `:config-open` | 打开配置文件 |
| `:config-reload` | 重载配置 |
| `Ctrl + r` | 重载当前文件（自定义映射，因为 Helix 默认不会自动重载被外部修改的文件） |
| `:tutor` | **必读！** 交互式教程（约 15 分钟） |
